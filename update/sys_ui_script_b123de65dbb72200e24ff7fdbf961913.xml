<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sys_ui_script">
    <sys_ui_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <description/>
        <global>false</global>
        <name>x_78492_profiling.Ng.profile.controller</name>
        <script><![CDATA[angular.module('profileApp', [])
.controller('ProfileController' , ['$document', function($document){
	var self = this;
	self.profileId = '';
	self.userId = '';
	self.skills = [];//self.getData('','');
	self.skillFilter = 'higher';
	self.getGlyphClass = function(levelMatch){
		return {
			"glyphicon glyphicon-ok color-green": levelMatch == 'equal',
			"glyphicon glyphicon-upload color-lightblue" : levelMatch == 'higher',
			"glyphicon glyphicon-download color-orange" : levelMatch == 'lower',
			"glyphicon glyphicon-remove color-red" : levelMatch == 'no'
		};
	};
	self.getData = function(profileElementId, userElementId ){
		var profileId = $document[0].getElementById(profileElementId).value;
		var userId = $document[0].getElementById(userElementId).value;
        if (!profileId || !userId){
			if (!userId && profileId){
				alert('Please select a user to compare');
			}
			if (!profileId && userId){
				alert('Please select a profile to compare');
			}
			if (!profileId && !userId){
			    alert('Please select a profile and a user to compare');
			}
			self.skills = [];
			return;
		}
		var ga = new GlideAjax('x_78492_profiling.ProfileManagementAJAX');
        ga.addParam('sysparm_name','getComparisonData');
        ga.addParam('sysparm_profile_id',profileId);
		ga.addParam('sysparm_user_id',userId);
        ga.getXML(function(response) {
            var answer = response.responseXML.documentElement.getAttribute("answer");
            //alert(answer);
			self.skills = answer.evalJSON(answer);
		});
 
	};
	self.getComparison = function(){
		console.log('Logging: '+ self.roleId);
		alert(self.roleId);
	};
}]);]]></script>
        <script_name>Ng.profile.controller</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>jloftas</sys_created_by>
        <sys_created_on>2016-12-19 22:29:56</sys_created_on>
        <sys_customer_update>true</sys_customer_update>
        <sys_id>b123de65dbb72200e24ff7fdbf961913</sys_id>
        <sys_mod_count>63</sys_mod_count>
        <sys_name>x_78492_profiling.Ng.profile.controller</sys_name>
        <sys_package display_value="Role Profiling" source="x_78492_profiling">98075f7fdb672200e24ff7fdbf961997</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Role Profiling">98075f7fdb672200e24ff7fdbf961997</sys_scope>
        <sys_update_name>sys_ui_script_b123de65dbb72200e24ff7fdbf961913</sys_update_name>
        <sys_updated_by>jloftas</sys_updated_by>
        <sys_updated_on>2016-12-29 11:01:17</sys_updated_on>
        <use_scoped_format>false</use_scoped_format>
    </sys_ui_script>
</record_update>
